(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{37:function(e,a,t){e.exports=t(66)},42:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(32),c=t.n(l),s=(t(42),t(15)),o=t(2),i=t(6),m=t(7),u=t(9),d=t(8),p=function(e){window.localStorage.setItem("token",e)},h=function(){return window.localStorage.getItem("token")},f=function(){localStorage.removeItem("token")},v=function(){var e=h();if(!e)return!1;var a=e.split(".");return!(a.length<3)&&JSON.parse(window.atob(a[1]))},E=function(e){return v().sub===e},g=function(){var e=v();return!!e&&Math.round(Date.now()/1e3)<e.exp},b=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).handleLogout=function(){f(),e.props.history.push("/login")},e}return Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar is-danger"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(s.b,{to:"/",className:"navbar-item"},"Home"),r.a.createElement(s.b,{to:"/films",className:"navbar-item"},"Films Index"),g()&&r.a.createElement(s.b,{to:"/films/new",className:"navbar-item"},"Post a Film")),r.a.createElement("div",{className:"navbar-end"},!g()&&r.a.createElement(s.b,{to:"/register",className:"navbar-item"},"Register"),!g()&&r.a.createElement(s.b,{to:"/login",className:"navbar-item"},"Log In"),g()&&r.a.createElement("span",{onClick:this.handleLogout,className:"navbar-item"},"Logout"))))}}]),t}(r.a.Component),N=Object(o.g)(b),w=function(){return r.a.createElement("section",{className:"hero is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-1 has-text-centered has-text-black"},"Film-Space"))))},O=t(36),j=function(e){var a=e.component,t=Object(O.a)(e,["component"]);return g()?r.a.createElement(o.b,Object.assign({},t,{component:a})):(f(),r.a.createElement(o.a,{to:"/login"}))},y=function(){return r.a.createElement("section",{className:"hero is-fullheight-with-navbar is-info"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-1 has-text-centered has-text-white"},"Oops something went wrong. please try again"))))},C=t(1),D=t.n(C),x=t(5),k=t(16),S=t.n(k),_=function(){return{headers:{Authorization:"Bearer ".concat(h())}}},I=function(e){return S.a.get("".concat("/api","/films/").concat(e,"/"))},A=function(e){return S.a.post("".concat("/api","/films/"),e,_())},F=function(e){return S.a.delete("".concat("/api","/films/").concat(e,"/"),_())},P=function(e){return S.a.post("".concat("/api","/login/"),e)},L=function(e){return console.log(e),S.a.post("".concat("/api","/register/"),e)},M=function(e){return console.log(e),S.a.post("".concat("/api","/reviews/"),e,_())},R=function(e){return S.a.delete("".concat("/api","/reviews/").concat(e,"/"),_())},H=function(e){var a=e.title,t=e.year,n=e.image,l=e.id;return r.a.createElement("div",{className:"column is-one-quarter-desktop is-one-third-tablet is-half-mobile"},r.a.createElement(s.b,{to:"/films/".concat(l)},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:n,alt:a,loading:"lazy",width:"255",height:"255"}))),r.a.createElement("div",{className:"card-content"},r.a.createElement("h5",{className:"subtitle is-7"},a," - ",t)))))},T=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={films:[]},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("/api","/films/"));case 3:a=e.sent,this.setState({films:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-multiline"},this.state.films.map((function(e){return r.a.createElement(H,Object.assign({key:e.id},e))})))))}}]),t}(r.a.Component),U=t(35),q=[1,2,3,4,5],z=function(e){var a=e.handleChange,t=e.rating;return r.a.createElement("div",null,[].concat(q).map((function(e,n){return r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"rating",value:n+1,onClick:a}),r.a.createElement(U.a,{className:"star",size:20,color:n+1<=t?"#ffc107":"#e4e5e9"}))})))},B=function(e){var a=e.owner,t=e.text,n=e.rating,l=e.id,c=e.handleDeleteReview;return r.a.createElement("div",{className:"review"},r.a.createElement("div",{className:"review-container"},r.a.createElement("div",{className:"review-header"},r.a.createElement(z,{rating:n}),r.a.createElement("h4",null,"User: ",a.username)),r.a.createElement("div",{className:"review-content"},r.a.createElement("p",null," ",t," ")),E(a.id)&&r.a.createElement("button",{className:"button is-danger",onClick:c,value:l},"Deleted")))},J=function(e){var a=e.name;return r.a.createElement("div",{className:"genre"},r.a.createElement("h4",null,a))},Y=t(13),G=t(4),K=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{text:"",rating:"",film:e.props.filmId}},e.handleChange=function(a){console.log(a.target.value);var t=Object(G.a)(Object(G.a)({},e.state.formData),{},Object(Y.a)({},a.target.name,a.target.value));e.setState({formData:t})},e.handleSubmit=function(){var a=Object(x.a)(D.a.mark((function a(t){var n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,M(e.state.formData,e.props);case 4:n=a.sent,console.log(n.data.id),console.log("Review send"),e.setState({formData:Object(G.a)(Object(G.a)({},e.state.form),{},{text:""})}),e.props.loadData(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(m.a)(t,[{key:"render",value:function(){return console.log(this.props.filmId),console.log(this.state.formData.rating),r.a.createElement("section",{className:"post-container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"top-section"},r.a.createElement("h4",null,this.props.user),r.a.createElement(z,{handleChange:this.handleChange,name:"rating",rating:this.state.formData.rating}),r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{className:"textarea",name:"text",value:this.state.formData.text,placeholder:"Make your review",onChange:this.handleChange}))),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("button",{className:"button is-info",type:"submit"},"Submit"))))}}]),t}(r.a.Component),Q=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={film:{title:null,duration:null,year:null,director:null,image:null,owner:{id:null,username:null},reviews:null,genres:null}},e.loadData=Object(x.a)(D.a.mark((function a(){var t,n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.props.match.params.id,console.log(t),a.next=5,I(t);case 5:n=a.sent,console.log(n.data.genres),e.setState({film:n.data,reviews:n.data.reviews,genres:n.data.genres}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])}))),e.handleDelete=Object(x.a)(D.a.mark((function a(){var t;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.props.match.params.id,a.next=4,F(t);case 4:e.props.history.push("/films"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0.response);case 10:case"end":return a.stop()}}),a,null,[[0,7]])}))),e.handleDeleteReview=function(){var a=Object(x.a)(D.a.mark((function a(t){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log(t.target.value),a.next=4,R(t.target.value);case 4:e.loadData(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0.response);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.loadData()}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.state.reviews)return null;var a=this.state.film,t=this.state.reviews,n=this.state.genres;return console.log(this.props.match.params),r.a.createElement("section",{className:"show-section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:a.image,alt:a.title}))),r.a.createElement("div",{className:"column is-half"},r.a.createElement("h4",{className:"title is-6"},"Title: ",a.title),r.a.createElement("hr",null),r.a.createElement("h4",{className:"title is-6"},"Duration: ",a.duration," Hours"),r.a.createElement("hr",null),r.a.createElement("h4",{className:"title is-6"},"Year: ",a.year),r.a.createElement("hr",null),r.a.createElement("h4",{className:"title is-6"},"Director: ",a.director),r.a.createElement("hr",null),r.a.createElement("h4",{className:"title is-6"},"Genres: ",n.map((function(e){return r.a.createElement(J,Object.assign({key:e.id},e))}))),r.a.createElement("hr",null),r.a.createElement("h4",{className:"title is-6"},"Added By: ",a.owner.username),r.a.createElement("hr",null),E(a.owner.id)&&r.a.createElement("button",{onClick:this.handleDelete,className:"button is-danger"},"Delete"))),r.a.createElement("hr",null)),r.a.createElement("div",{className:"post"},r.a.createElement(K,{filmId:this.props.match.params.id,loadData:this.loadData})),r.a.createElement("div",{className:"reviews"},t.map((function(a){return r.a.createElement(B,Object.assign({key:a.id},a,{handleDeleteReview:e.handleDeleteReview}))}))))}}]),t}(r.a.Component),V=t(34),W=function(e){var a=e.formData,t=e.handleChange,n=e.handleMultiChange,l=e.handleSubmit,c=e.buttonText;return r.a.createElement("div",{className:"columns"},r.a.createElement("form",{onSubmit:l,className:"column is-half is-offset-one-quarter box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Title"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Title",name:"title",onChange:t,value:a.title}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Duration"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Duration",name:"duration",onChange:t,value:a.duration}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Year"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Year",name:"year",onChange:t,value:a.year})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Image"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Image Url",name:"image",onChange:t,value:a.image})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Director"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Director",name:"director",onChange:t,value:a.director}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Genres"),r.a.createElement("div",{className:"control"},r.a.createElement("select",{onChange:n,value:a.genres,name:"genres",multiple:!0},r.a.createElement("option",{value:"1"},"Action"),r.a.createElement("option",{value:"2"},"Adventure"),r.a.createElement("option",{value:"3"},"Comedy"),r.a.createElement("option",{value:"4"},"Crime"),r.a.createElement("option",{value:"5"},"Drama"),r.a.createElement("option",{value:"6"},"Fantasy"),r.a.createElement("option",{value:"7"},"Historical"),r.a.createElement("option",{value:"8"},"Historical Fiction"),r.a.createElement("option",{value:"9"},"Horror"),r.a.createElement("option",{value:"10"},"Science Fiction")))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth is-info"},c))))},X=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{title:"",duration:"",year:"",director:"",genres:[]}},e.handleMultiChange=function(a){var t=Object(V.a)(a.target.selectedOptions).map((function(e){return e.value}));console.log(t);var n=Object(G.a)(Object(G.a)({},e.state.formData),{},Object(Y.a)({},a.target.name,t));console.log(n),e.setState({formData:n})},e.handleChange=function(a){console.log(a.target.value);var t=Object(G.a)(Object(G.a)({},e.state.formData),{},Object(Y.a)({},a.target.name,a.target.value));e.setState({formData:t})},e.handleSubmit=function(){var a=Object(x.a)(D.a.mark((function a(t){var n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,A(e.state.formData);case 4:n=a.sent,console.log(n.data),e.props.history.push("/films/".concat(n.data.id)),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),e.props.history.push("/notfound"),console.log(a.t0.response);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement(W,{formData:this.state.formData,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleMultiChange:this.handleMultiChange,buttonText:"Post a Film"})))}}]),t}(r.a.Component),Z=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{first_name:"",last_name:"",username:"",profile_image:"",email:"",password:"",password_confirmation:""},errors:{}},e.handleChange=function(a){var t=Object(G.a)(Object(G.a)({},e.state.formData),{},Object(Y.a)({},a.target.name,a.target.value)),n=Object(G.a)(Object(G.a)({},e.state.errors),{},Object(Y.a)({},a.target.name,""));e.setState({formData:t,errors:n})},e.handleSubmit=function(){var a=Object(x.a)(D.a.mark((function a(t){var n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,L(e.state.formData);case 4:n=a.sent,console.log(n.data),e.props.history.push("/login"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),e.setState({errors:a.t0.response.data});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(m.a)(t,[{key:"render",value:function(){var e=this.state,a=e.formData,t=e.errors;return console.log(this.state),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-half is-offset-one-quarter box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"First Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t.first_name?"is-danger":""),placeholder:"First Name",name:"first_name",onChange:this.handleChange,value:a.first_name})),t.first_name&&r.a.createElement("small",{className:"help is-danger"},t.first_name)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Last Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t.last_name?"is-danger":""),placeholder:"Last Name",name:"last_name",onChange:this.handleChange,value:a.last_name})),t.last_name&&r.a.createElement("small",{className:"help is-danger"},t.last_name)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Username"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t.username?"is-danger":""),placeholder:"Username",name:"username",onChange:this.handleChange,value:a.username})),t.last_name&&r.a.createElement("small",{className:"help is-danger"},t.last_name)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t.email?"is-danger":""),placeholder:"Email",name:"email",onChange:this.handleChange,value:a.email})),t.email&&r.a.createElement("small",{className:"help is-danger"},t.email)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Profile Image"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t.profile_image?"is-danger":""),placeholder:"URL Image",name:"profile_image",onChange:this.handleChange,value:a.profile_image})),t.profile_image&&r.a.createElement("small",{className:"help is-danger"},t.profile_image)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t.password?"is-danger":""),type:"password",placeholder:"Password",name:"password",onChange:this.handleChange,value:a.password})),t.password&&r.a.createElement("small",{className:"help is-danger"},t.password)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password Confirmation"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"password",className:"input ".concat(t.password_confirmation?"is-danger":""),placeholder:"Password Confirmation",name:"password_confirmation",onChange:this.handleChange,value:a.password_confirmation})),t.passwordConfirmation&&r.a.createElement("small",{className:"help is-danger"},t.password_confirmation)),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth is-rounded is-info"},"Register"))))))}}]),t}(r.a.Component),$=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{email:"",password:""},error:""},e.handleChange=function(a){try{var t=Object(G.a)(Object(G.a)({},e.state.formData),{},Object(Y.a)({},a.target.name,a.target.value));e.setState({formData:t,error:""})}catch(n){console.log(n)}},e.handleSubmit=function(){var a=Object(x.a)(D.a.mark((function a(t){var n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,P(e.state.formData);case 4:n=a.sent,p(n.data.token),console.log(n.data.token),e.props.history.push("/films"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),e.setState({error:"Invalid Credentials"});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(m.a)(t,[{key:"render",value:function(){var e=this.state,a=e.formData,t=e.error;return console.log(this.state),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"containers"},r.a.createElement("div",{className:"columns"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-half is-offset-one-quarter box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t?"is-danger":""),placeholder:"Email",name:"email",onChange:this.handleChange,value:a.email}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(t?"is-danger":""),type:"password",placeholder:"Password",name:"password",onChange:this.handleChange,value:a.password}),t&&r.a.createElement("small",{className:"help is-danger"},t))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth is-rounded is-info"},"Login"))))))}}]),t}(r.a.Component),ee=function(){return r.a.createElement(s.a,null,r.a.createElement(N,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:w}),r.a.createElement(j,{path:"/films/new",component:X}),r.a.createElement(o.b,{path:"/films/:id",component:Q}),r.a.createElement(o.b,{path:"/films",component:T}),r.a.createElement(o.b,{path:"/register",component:Z}),r.a.createElement(o.b,{path:"/login",component:$}),r.a.createElement(o.b,{path:"/*",component:y})))};c.a.render(r.a.createElement(ee,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.2288eaa2.chunk.js.map